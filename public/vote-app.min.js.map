{"version":3,"sources":["authentication/authentication.client.module.js","cookies-warning/cookies-warning.client.module.js","messages/messages.client.module.js","navigation/navigation.client.module.js","application.js","authentication/authentication.client.controller.js","authentication/user.client.factory.js","cookies-warning/cookie.client.factory.js","cookies-warning/cookies-warning.client.directive.js","cookies-warning/cookies-warning.controller.js","messages/messages.client.controller.js","messages/messages.client.directive.js","messages/messages.client.factory.js","vote-app/all-polls.client.controller.js","vote-app/all-polls.client.directive.js","vote-app/chart.client.controller.js","vote-app/poll.client.controller.js","vote-app/poll.client.factory.js","vote-app/vote-app.client.routes.js","navigation/navigation.client.controller.js","navigation/navigation.client.directive.js"],"names":[],"mappings":"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","file":"vote-app.min.js","sourcesContent":["angular.module('authentication', []);","angular.module('cookiesWarning', ['ngCookies']);","angular.module('messages', []);","angular.module('navigation', ['authentication']);","angular.module('vote-app', ['chart.js', 'navigation', 'authentication', 'ngRoute', 'messages', 'cookiesWarning']);\r\n","angular.module('authentication')\r\n.controller('AuthenticationController', ['$scope', 'user', ($scope, user) => {\r\n  $scope.auth = {};\r\n  user.loadUser($scope.auth);\r\n\r\n  $scope.logOut = () => {\r\n    user.logOut.bind(null, $scope.auth)();\r\n    console.log($scope.auth);\r\n  }\r\n}]);","angular.module('authentication')\r\n.factory('user', ['$http', '$rootScope', ($http, $rootScope) => {\r\n  function isAuthenticated() {\r\n    return !angular.equals({}, user);\r\n  }\r\n  let user = {};\r\n\r\n  return {\r\n    loadUser: (scope) => {\r\n      // check if user is cached \r\n      if(!isAuthenticated()) {\r\n        $http.get('/auth/user')\r\n        .then(res => {\r\n          user = res.data;\r\n          if (isAuthenticated()) {\r\n            user.isAuthenticated = true;\r\n          }\r\n          $rootScope.$broadcast('user', user);\r\n          scope.user = user;\r\n        })\r\n        .catch(err => {\r\n          user = {\r\n            isAuthenticated: false\r\n          };\r\n          throw err;\r\n        });\r\n      } else {\r\n        scope.user = user;\r\n      }\r\n    },\r\n    getUser: () => user,\r\n    logOut: (scope) => {\r\n      $http.get('/auth/logout')\r\n      .then(() => {\r\n        user = {\r\n          isAuthenticated: false\r\n        };\r\n        scope.user = user;\r\n        $rootScope.$broadcast('user', user);\r\n      })\r\n      .catch(err => {\r\n        user = {\r\n          isAuthenticated: false\r\n        };\r\n        scope.user = user;\r\n        throw err;\r\n      });\r\n    }\r\n  }\r\n}]);\r\n","angular.module('cookiesWarning')\r\n.factory('cookie', ['$rootScope', '$cookies', ($rootScope, $cookies) => {\r\n  return {\r\n    isAccepted: () => !!$cookies.get('cookiesPolicyAccepted'),\r\n    accept: () => {\r\n      $cookies.put('cookiesPolicyAccepted', true);\r\n      $rootScope.$broadcast('cookiesPolicyAccepted');\r\n    }\r\n  }\r\n}]);","angular.module('cookiesWarning')\r\n.directive('cookiesWarning', () => {\r\n  return {\r\n    restrict: 'E',\r\n    transclude: true,\r\n    controller: 'CookiesWarningController',\r\n    templateUrl: 'views/cookies-policy.client.view.html'\r\n  }\r\n});","angular.module('cookiesWarning')\r\n.controller('CookiesWarningController', ['$scope', 'cookie', ($scope, cookie) => {\r\n  $scope.isAccepted = cookie.isAccepted();\r\n\r\n  $scope.accept = cookie.accept;\r\n\r\n  $scope.$on('cookiesPolicyAccepted', () => {\r\n    $scope.isAccepted = true;\r\n  });\r\n}]);","angular.module('messages')\r\n.controller('MessagesController', ['$scope', $scope => {\r\n  $scope.message = [];\r\n\r\n  $scope.$on('messages', (event, messages) => $scope.messages = messages);\r\n  $scope.$on('$routeChangeStart', () => $scope.messages = []);\r\n}]);\r\n","angular.module('messages')\r\n.directive('messages', () => {\r\n  return {\r\n    templateUrl: 'views/messages.client.view.html',\r\n    restrict: 'E'\r\n  }\r\n});\r\n","angular.module('messages')\r\n.factory('messages', ['$rootScope', $rootScope => {\r\n  return {\r\n    handleErrors: err => {\r\n      var messages = err.data.map(msg => {\r\n        return {\r\n          content: msg.content,\r\n          class: `alert alert-${msg.type}`\r\n        }\r\n      });\r\n\r\n      $rootScope.$broadcast('messages', messages);\r\n    }\r\n  }\r\n}]);\r\n","angular.module('vote-app')\r\n.controller('AllPollsController', ['$scope', 'poll', '$attrs', 'user', ($scope, poll, $attrs, auth) => {\r\n  let user = auth.getUser();\r\n  $scope.queryParam = {};\r\n\r\n  if ($attrs.hasOwnProperty('ownerOnly')) {\r\n    $scope.queryParam._creator = user._id;\r\n  }\r\n\r\n  poll.getPolls($scope, {\r\n    limit: 10,\r\n    offset: 0\r\n  });\r\n\r\n  $scope.getPolls = poll.getPolls.bind(null, $scope);\r\n}]);\r\n","angular.module('vote-app')\r\n.directive('allPolls', () => {\r\n  return {\r\n    controller: \"AllPollsController\",\r\n    templateUrl: 'views/all-polls.client.view.html'\r\n  }\r\n});","angular.module('vote-app')\r\n.controller('ChartController', ['$scope', 'poll', 'user', ($scope, poll, user) => {\r\n  $scope.user = user.getUser();\r\n  $scope.vote = \"\";\r\n  poll.getPoll($scope);\r\n  \r\n  $scope.votePoll = poll.votePoll.bind(null, $scope);\r\n  $scope.deletePoll = poll.deletePoll;\r\n\r\n  $scope.$on('user', (event, user) => {\r\n    $scope.user = user;\r\n  });\r\n}]);","angular.module('vote-app')\r\n.controller('PollController', ['poll', '$scope', (poll, $scope) => {\r\n  $scope.poll = {\r\n    title: '',\r\n    options: ''\r\n  };\r\n\r\n  $scope.createPoll = poll.createPoll;\r\n}]);","angular.module('vote-app')\r\n.factory('poll', ['$http', '$location', '$routeParams', 'messages', ($http, $location, $routeParams, messages) => {\r\n  function transform(obj) {\r\n    let options = obj.data.options.map(option => {\r\n      return {\r\n        label: option,\r\n        value: option\r\n      }\r\n    });\r\n\r\n    options.push({\r\n      label: \"I'd like custom option\",\r\n      value: null\r\n    });\r\n    return {\r\n      title: obj.data.title,\r\n      labels: obj.data.options,\r\n      selectBoxOptions: options,\r\n      options: {\r\n        legend: {\r\n          display: true,\r\n          position: 'bottom'\r\n        }\r\n      },\r\n      data: obj.data.votes,\r\n      owner: obj.data.owner\r\n    }\r\n  }\r\n\r\n  return {\r\n    getPolls: (scope, query) => {\r\n      let uri = `api/polls/?limit=${query.limit}&offset=${query.offset}&time=${Date.now()}`;\r\n\r\n      if (scope.queryParam._creator) {\r\n        uri += `&user=${scope.queryParam._creator}`;\r\n      }\r\n\r\n      $http.get(uri)\r\n      .then(response => {\r\n        if (scope.polls && scope.query && scope.query.time - response.data.time > 0) {\r\n          console.log('Ignoring old request');\r\n          return;\r\n        }\r\n        scope.polls = response.data.polls;\r\n        scope.query = response.data.query;\r\n        scope.range = [];\r\n        for (let i = 0; i < response.data.query.count; i += 10) {\r\n          scope.range.push({\r\n            query: {\r\n              limit: 10,\r\n              offset: i\r\n            }\r\n          });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n    },\r\n    createPoll: poll => {\r\n      $http.post('api/poll', {\r\n        title: poll.title,\r\n        options: poll.options.split('\\n')\r\n      })\r\n      .then(response => {\r\n        $location.path(`/poll/${response.data._id}`);\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n    },\r\n    getPoll: scope => {\r\n      $http.get(`/api/poll/${$routeParams.id}`)\r\n      .then(result => {\r\n\r\n\r\n        scope.poll = transform(result);\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n    },\r\n    deletePoll: id => {\r\n      $http.delete(`/api/poll/${$routeParams.id}`)\r\n      .then(result => {\r\n        $location.path('/my-polls');\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      })\r\n    },\r\n    votePoll: scope => {\r\n      let vote = \"\";\r\n      \r\n      if (scope.vote === null) {\r\n        vote = scope.customOption || \"\";\r\n      } else {\r\n        vote = scope.vote;\r\n      }\r\n\r\n      $http.put(`/api/poll/${$routeParams.id}`, { vote })\r\n      .then(result => {\r\n        scope.poll = transform(result);\r\n      })\r\n      .catch(messages.handleErrors);\r\n    }\r\n  }\r\n}]);\r\n","angular.module('vote-app')\r\n.config(['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider) => {\r\n  $routeProvider\r\n  .when('/', {\r\n    templateUrl: 'views/polls.client.view.html'\r\n  })\r\n  .when('/new-poll', {\r\n    templateUrl: 'views/new-poll.client.view.html'\r\n  })\r\n  .when('/my-polls', {\r\n    templateUrl: 'views/my-polls.client.view.html'\r\n  })\r\n  .when('/poll/:id', {\r\n    templateUrl: 'views/poll.client.view.html'\r\n  })\r\n  .otherwise('/', {\r\n    redirect: '/'\r\n  });\r\n\r\n  $locationProvider.html5Mode(true);\r\n}]);\r\n","angular.module('navigation')\r\n.controller('NavigationController', ['$scope', '$window', ($scope, $window) => {\r\n  $scope.twitterAuth = () => $window.location.assign('/auth/twitter')\r\n}]);\r\n","angular.module('navigation')\r\n.directive('navigation', () => {\r\n  return {\r\n    templateUrl: 'views/header.client.view.html',\r\n    restrict: 'E'\r\n  }\r\n});\r\n"],"sourceRoot":"/source/"}